---
title: "Quick Setup: R Versions, Packages, and API Keys"
author: "From Raw Data to Regional Insights: Intermediate R Tools for Workforce & Economic Development"
date: "Nov 19–20, 2025"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      results = "hide",
                      warning = FALSE, 
                      message = FALSE)
```


# Purpose of This Guide

Before attending the workshop, please complete all steps in this document. You will:

- verify your **R** and **RStudio** versions  
- install or update all required packages  
- securely set your **API keys** (FRED, Census, BLS, BEA)  
- confirm your setup works  

This ensures you are ready for hands-on exercises without delays.


---

# 1. Check Your R and RStudio Versions

We strongly recommend:

- **R ≥ 4.3**  
- **RStudio ≥ 2023.12**

### Check your versions:

```{r}
R.version.string
try(rstudioapi::versionInfo()$version, silent = TRUE)
```

### Download updates (if needed):

- **R:** https://cran.r-project.org  
- **RStudio Desktop:** https://posit.co/download/rstudio-desktop  

Updating ensures compatibility with spatial packages (e.g., **sf**, **tigris**, **tmap**) used in mapping exercises.


---

# 2. Install/Update Required Packages

These packages power all training modules:

- `tidyverse` — data wrangling, visualization  
- `tidycensus`, `tigris`, `tmap` — ACS, shapefiles, mapping  
- `fredr`, `blsAPI`, `bea.R` — federal statistical APIs  
- `gt`, `janitor`, `patchwork` — reporting, tables, styling  
- `sf` — spatial data  
- `usethis` — environment setup  

### Install everything (safe to run even if you already have packages):

```{r, eval=FALSE}
install.packages(c(
  "tidyverse", "tigris", "tidycensus", "tmap", "readr",
  "fredr", "blsAPI", "bea.R", "gt", "janitor", "patchwork",
  "sf", "usethis"
))
```

If installation fails:

- macOS: install Xcode command line tools  
- Windows: install RTools: https://cran.r-project.org/bin/windows/Rtools/  
- Linux: install GDAL, GEOS, PROJ for `sf`  

Full instructions: https://r-spatial.github.io/sf/#installing


---

# 3. Secure API Key Setup Using `.Renviron`

We **do not** put API keys inside scripts or Rmd files. We store them in `.Renviron` so they never show up in the console or output. 

Where to get your keys:

- **FRED API Key:**  
  https://fred.stlouisfed.org/docs/api/api_key.html  

- **Census API Key:**  
  https://api.census.gov/data/key_signup.html  

- **BLS API Key:**  
  https://www.bls.gov/developers/  

- **BEA API Key:**  
  https://apps.bea.gov/API/signup/  

## Step 1 — Open `.Renviron`

```{r}
usethis::edit_r_environ()
```

## Step 2 — Add your keys (one per line)

```
FRED_API_KEY=your_fred_key_here
CENSUS_API_KEY=your_census_key_here
BLS_API_KEY=your_bls_key_here
BEA_API_KEY=your_bea_key_here
```
Save `.Renviron`, then restart R.

---

# 4. Confirm Keys Loaded Correctly

```{r}
Sys.getenv("FRED_API_KEY")
Sys.getenv("CENSUS_API_KEY")
Sys.getenv("BLS_API_KEY")
Sys.getenv("BEA_API_KEY")
```

If a key returns `""`, reopen `.Renviron` and correct it.

---

# 5. Use the Keys in Your Session

```{r}
library(fredr)
fredr_set_key(Sys.getenv("FRED_API_KEY"))

library(tidycensus)
census_api_key(Sys.getenv("CENSUS_API_KEY"), install = FALSE)

bls_key <- Sys.getenv("BLS_API_KEY")
bea_key <- Sys.getenv("BEA_API_KEY")
```

---


# Setup Complete

You now have:

- Correct R/RStudio versions  
- All packages installed or updated  
- API keys securely stored  
- Keys automatically available for all training modules  

You're ready for the workshop!
